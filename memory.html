<!DOCTYPE html>
<html>
<head>
	<title>Memory game</title>
<style>
	#contain {
		max-width: 950px;
		height: 474px;
		;
		padding: 0px;
	}

	.conti {
		width: 150px;
		height: 150px;
		border: solid 1px;
		margin: 0px;
		float: left;
	}

	.image {
		background-position: cover;
		opacity: 0;
		width: 150px;
		height: 150px;
	}


</style>

</head>
<body onload="initialize()">
<h1>MEMORY</h1>
<!-- <button onclick="restartGame()">Restart</button>
<p id="demo"></p> -->
<div>Number of moves<p id="nb"></p></div>
<div id="contain"></div>

<script>

var pics = [];
var results = [];
var count = 0;
var elements = [];
var nombreDeCoups = 0;
	
		for (var i = 1; i < 10; i++) {
			pics.push("images/"+i+".jpg");
			pics.push("images/"+i+".jpg");
		}	

	function initialize() {
		for (var i = 0; i < 18; i++) {
			var j = i+1;
			var randoume = Math.floor((Math.random() * pics.length) );
			var pif = pics[randoume];
			var affichage = '<div class="conti"><div class="image" id="'+j+'" style="background-image: url(' +pif+ ')" onclick="compare('+j+')"></div></div>';
			document.getElementById("contain").innerHTML += affichage;
			pics.splice(randoume, 1);
		}
	}

	function compare(a) {
		aElem =document.getElementById(a);
		elements.push(aElem);
		var attrib = aElem.style.backgroundImage;
		aElem.style.opacity = 1;
		results.push(attrib);
		count++;
		count2 = count - 2;
		count1 = count - 1;
		if (count%2 == 0) {
			nombreDeCoups++;
			document.getElementById("nb").innerHTML = nombreDeCoups;
			if (results.length == 18) {
				alert("WON IN "+nombreDeCoups+"MOVES, WELL DONE!");
			}
			resultat();
		}
	}

	function resultat () {
		if (results[count2] != results[count1] || elements[0] == elements[1]) {
			setTimeout(function() {
				elements[0].style.opacity = 0;
				elements[1].style.opacity = 0;
				elements = [];
			}, 1000);
			results.splice(- 1);
			results.splice(- 1);
		count = count - 2;
		}

		else if (results[count2] == results[count1]){
			elements[0].onclick = null;
			elements[1].onclick = null;
			elements = [];
		}
	}

	function restartGame() {
		var x;
		if (confirm("Reinitialize ?") == true) {
			document.getElementById("contain").innerHTML = "";
			initialize();
		}
		else {
			x = "Already giving up ?"
		}
		document.getElementById("demo").innerHTML = x;
	}
	
			


</script>
</body>
</html>